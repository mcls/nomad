{"name":"Nomad","tagline":"Flexible migration library for Go","body":"# Nomad\r\n\r\n[![Build\r\nStatus](https://travis-ci.org/mcls/nomad.svg)](https://travis-ci.org/mcls/nomad)\r\n| [GoDoc](https://godoc.org/github.com/mcls/nomad)\r\n\r\n***UNDER DEVELOPMENT***\r\n\r\nNomad is a migration library for Go. Its goal is to be minimal and flexible.  \r\nYou can use it with an ORM, or use plain SQL.\r\n\r\n## Example\r\n\r\nHere's an example of a migration definition.\r\n\r\n```go\r\n&nomad.Migration{\r\n    Version: \"2015-11-22_18:07:05\",\r\n    Up: func(ctx interface{}) error {\r\n        c := ctx.(*Context)\r\n        _, err := c.DB.Exec(`\r\n        CREATE TABLE posts (\r\n            id serial PRIMARY KEY,\r\n            title text NOT NULL CHECK(length(title) < 200),\r\n            content text NOT NULL,\r\n            created_at timestamp with time zone DEFAULT(current_timestamp)\r\n        )`)\r\n        return err\r\n    },\r\n    Down: func(ctx interface{}) error {\r\n        c := ctx.(*Context)\r\n        _, err := c.DB.Exec(\"DROP TABLE posts\")\r\n        return err\r\n    },\r\n}\r\n```\r\n\r\nFor a more complete example, take a look at\r\n[example_test.go](https://github.com/mcls/nomad/blob/master/example_test.go).\r\n\r\n\r\n## Install\r\n\r\nTo install the package and the command-line tool:\r\n\r\n```bash\r\ngit clone https://github.com/mcls/nomad.git\r\nmake install\r\n```\r\n\r\n## Code generation\r\n\r\nThe initial migration can be created via:\r\n\r\n```bash\r\n# to create a migration\r\nnomad new create_users\r\n```\r\n\r\nAfter that you can import [cobra](https://github.com/spf13/cobra) commands in\r\nyour own app:\r\n\r\n```go\r\nmigrationCmd := nomad.NewMigrationCmd(\r\n  migrations, // migration.List object, basically your migrations\r\n  \"./migrations\", // the migrations directory\r\n)\r\n```\r\n\r\nThis creates a `migration` command with these subcommands:\r\n\r\n* `run`: runs all pending migrations\r\n* `rollback`: rolls back the latest migration\r\n* `new`: creates a new migration\r\n\r\n","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}